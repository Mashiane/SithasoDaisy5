class SVGRenderer extends HTMLElement{constructor(){super(),this.eventListeners=new Map}static get observedAttributes(){return["data-src","width","height","fill","background","data-js","style","class"]}async connectedCallback(){await this.loadSVG()}async attributeChangedCallback(t,e,s){e!==s&&("data-src"===t?await this.loadSVG():"data-js"===t?this.updateEventHandling():this.svgContent&&this.applyStyles(this.svgContent))}async loadSVG(){const t=this.getAttribute("data-src");if(t)try{let e=localStorage.getItem(t);if(!e){const s=await fetch(t);if(!s.ok)throw new Error("Failed to fetch SVG");e=await s.text(),localStorage.setItem(t,e)}const s=document.createElement("div");s.innerHTML=e;const n=s.querySelector("svg");if(!n)throw new Error("Invalid SVG content");Array.from(this.attributes).forEach((t=>{"data-src"!==t.name&&n.setAttribute(t.name,t.value)})),this.applyStyles(n),this.replaceWith(n),this.svgContent=n,"enabled"===this.getAttribute("data-js")&&this.updateEventHandling()}catch(t){const e=document.createElement("div");e.style.color="red",e.textContent="Failed to load SVG",this.replaceWith(e)}}applyStyles(t){const e=this.getAttribute("width"),s=this.getAttribute("height"),n=this.getAttribute("fill"),i=this.getAttribute("background"),l=this.getAttribute("style"),a=this.getAttribute("class");if(e&&t.setAttribute("width",e),s&&t.setAttribute("height",s),i&&(t.style.background=i),a&&t.setAttribute("class",a),n&&(t.style.fill=n,t.style.color=n,t.querySelectorAll("[fill]").forEach((t=>{t.setAttribute("fill",n)}))),l){t.setAttribute("style",l);const e=l.match(/color\s*:\s*([^;]+);?/i);if(e){const s=e[1].trim();t.style.fill=s,t.style.color=s,t.querySelectorAll("[fill]").forEach((t=>{t.setAttribute("fill",s)}))}}}updateEventHandling(){this.svgContent&&(this.eventListeners.forEach(((t,e)=>{this.svgContent.removeEventListener(e,t)})),this.eventListeners.clear(),"enabled"===this.getAttribute("data-js")?(["click","mouseover","mouseout","mousedown","mouseup"].forEach((t=>{const e=e=>{const s=new CustomEvent(`svg-${t}`,{detail:{originalEvent:e,svgElement:this.svgContent},bubbles:!0});this.svgContent.dispatchEvent(s)};this.svgContent.addEventListener(t,e),this.eventListeners.set(t,e)})),this.svgContent.style.cursor="pointer"):(this.svgContent.style.cursor="default",this.svgContent.style.pointerEvents="none"))}addStyle(t,e){this.svgContent&&(this.svgContent.style[t]=e)}removeStyle(t){this.svgContent&&(this.svgContent.style[t]="")}addClass(t){this.svgContent&&this.svgContent.classList.add(t)}removeClass(t){this.svgContent&&this.svgContent.classList.remove(t)}toggleClass(t){this.svgContent&&this.svgContent.classList.toggle(t)}}customElements.define("svg-renderer",SVGRenderer);